<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achetez TEST - La Crypto du Futur</title>
    <link rel="stylesheet" href="style.css"> <!-- Lien vers votre fichier CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
</head>
<body>

    <header>
        <div class="container">
            <div class="logo">
                <img src="images/test-logo.png" alt="Logo TEST" width="50">
                <span>TEST</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#">À Propos</a></li>
                    <li><a href="#">Fonctionnalités</a></li>
                    <li><a href="#">Roadmap</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </nav>
            <div class="metamask-connect">
                <button id="connect-metamask">Connecter MetaMask</button>
            </div>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Investissez dans le Futur avec TEST</h1>
                    <p>TEST est la cryptomonnaie innovante qui révolutionne [votre domaine d'application]. Rejoignez la communauté et profitez d'avantages exclusifs.</p>
                    <a href="#buy-test" class="button primary">Acheter TEST</a>
                </div>
                <div class="hero-image">
                    <img src="images/crypto-futuristic.jpg" alt="Illustration Futuriste de TEST" width="500">
                </div>
            </div>
        </section>

        <section class="features">
            <div class="container">
                <h2>Pourquoi choisir TEST ?</h2>
                <div class="feature-grid">
                    <div class="feature-item">
                        <img src="images/feature1.png" alt="Avantage 1" width="80">
                        <h3>Sécurité Maximale</h3>
                        <p>Notre infrastructure est conçue avec les normes de sécurité les plus élevées pour protéger vos investissements.</p>
                    </div>
                    <div class="feature-item">
                        <img src="images/feature2.png" alt="Avantage 2" width="80">
                        <h3>Transactions Rapides</h3>
                        <p>Profitez de transactions instantanées et de frais réduits grâce à notre technologie de pointe.</p>
                    </div>
                    <div class="feature-item">
                        <img src="images/feature3.png" alt="Avantage 3" width="80">
                        <h3>Communauté Engagée</h3>
                        <p>Rejoignez une communauté active et bénéficiez d'un support constant de notre équipe et des autres utilisateurs.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="buy-test" class="buy-section">
            <div class="container">
                <h2>Acheter TEST</h2>
                <p>Achetez TEST facilement et en toute sécurité.  Connectez votre portefeuille MetaMask et suivez les instructions.</p>

                <div class="buy-form">
                    <label for="amount">Montant en ETH</label>
                    <input type="number" id="amount" placeholder="Entrez le montant">
                    <button class="button secondary" id="buy-button">Acheter</button>
                </div>
                <p class="disclaimer">Avertissement: L'investissement dans les cryptomonnaies comporte des risques. Veuillez investir de manière responsable.</p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>© 2024 TEST. Tous droits réservés.</p>
            <p><a href="#">Mentions Légales</a> | <a href="#">Conditions d'Utilisation</a></p>
        </div>
    </footer>

    <script>
        let provider;
        let signer;
        let contract;

        // Fonction pour connecter MetaMask
        async function connectMetaMask() {
            if (window.ethereum) {
                provider = new ethers.BrowserProvider(window.ethereum);
                try {
                    // Demande de connexion à MetaMask
                    await provider.send("eth_requestAccounts", []);
                    signer = provider.getSigner();
                    console.log("Compte connecté:", await signer.getAddress());
                    alert("MetaMask connecté !");
                } catch (err) {
                    console.error("Erreur de connexion:", err);
                    alert("Erreur de connexion à MetaMask. Assurez-vous que MetaMask est installé.");
                }
            } else {
                alert("MetaMask n'est pas installé. Veuillez l'installer pour continuer.");
            }
        }

        // Fonction pour acheter des tokens TEST
        async function acheterTEST() {
            const amount = document.getElementById('amount').value;
            if (!amount || parseFloat(amount) <= 0) {
                alert("Veuillez entrer un montant valide.");
                return;
            }

            // Exemple d'adresse du contrat pour TEST, à remplacer par la vraie adresse de contrat de TEST
            const contractAddress = "0xbCD066737b2237B24F09481458356F69f63155b3";
            const abi = [
                // ABI pour la fonction d'achat
                "function buy(uint256 amount) public payable"
            ];

            // Création du contrat
            contract = new ethers.Contract(contractAddress, abi, signer);

            try {
                // Achat du token TEST
                const tx = await contract.buy({ value: ethers.parseEther(amount) });
                console.log("Transaction envoyée:", tx);
                alert("Achat en cours. Transaction ID: " + tx.hash);
                await tx.wait();
                alert("Achat réussi !");
            } catch (err) {
                console.error("Erreur lors de l'achat:", err);
                alert("Erreur lors de l'achat.");
            }
        }

        // Event listeners
        document.getElementById('connect-metamask').addEventListener('click', connectMetaMask);
        document.getElementById('buy-button').addEventListener('click', acheterTEST);
    </script>
</body>
</html>
